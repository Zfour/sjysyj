设计艺术研究  DESIGN RESEARCH  Vol.8 No.5 2018     :@0.103174:0.031720:0.434848:0.031720:0.434848:0.020199:0.103174:0.020199:0.012599:0.012599:0.012599:0.012599:0.012599:0.012599:0.004196:0.002104:0.009034:0.008076:0.008152:0.003175:0.009500:0.009185:0.004196:0.008719:0.008076:0.008152:0.008076:0.008492:0.008719:0.009210:0.009223:0.004196:0.008404:0.008240:0.007522:0.003150:0.003427:0.007560:0.004196:0.009185:0.007522:0.003427:0.007560:0.004196:0.007560:0.007560:0.007560:0.007560:0.004196:0.004196:0.004196:0.004196:0.004196
74:@0.062262:0.031720:0.077381:0.031720:0.077381:0.020199:0.062262:0.020199:0.007560:0.007560
3．视频库的系统架构:@0.152645:0.174965:0.313159:0.174965:0.313159:0.160804:0.152645:0.160804:0.009323:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799
初期的视频库系统架构 ，综合了开发 、使:@0.153334:0.194758:0.481022:0.194758:0.481022:0.180548:0.153334:0.180548:0.017992:0.017992:0.017992:0.017992:0.017992:0.017992:0.017992:0.017992:0.017992:0.016799:0.003708:0.017992:0.017992:0.017992:0.017992:0.017992:0.016799:0.003709:0.017992:0.016799
用 、维护 、经济性 、升级等各方面 。在该方案:@0.119047:0.213944:0.481044:0.213944:0.481044:0.199734:0.119047:0.199734:0.016799:0.003355:0.017639:0.017639:0.016799:0.003355:0.017639:0.017639:0.017639:0.016799:0.003355:0.017639:0.017639:0.017639:0.017639:0.017639:0.017639:0.016799:0.003355:0.017639:0.017639:0.017639:0.017639:0.016799
里 ，使用一台 MAC PRO 单机服务器作为视频转:@0.119047:0.233130:0.480964:0.233130:0.480964:0.218920:0.119047:0.218920:0.016799:0.003005:0.017286:0.017286:0.017286:0.017286:0.016799:0.004685:0.013473:0.011642:0.010718:0.005984:0.009811:0.011642:0.011154:0.004687:0.017286:0.017286:0.017286:0.017286:0.017286:0.017286:0.017286:0.017286:0.017286:0.016799
码处理服务器 ，使用 Handbrake 作为视频转码软:@0.119047:0.252316:0.480875:0.252316:0.480875:0.238106:0.119047:0.238106:0.017169:0.017169:0.017169:0.017169:0.017169:0.016799:0.002894:0.017169:0.017169:0.016799:0.004574:0.012448:0.007790:0.008702:0.008702:0.008702:0.005947:0.007790:0.008702:0.007408:0.004581:0.017169:0.017169:0.017169:0.017169:0.017169:0.017169:0.016799
件 ，基于 H.264 转码标准进行人工操作进行转码:@0.119047:0.271502:0.480949:0.271502:0.480949:0.257292:0.119047:0.257292:0.016799:0.002856:0.017135:0.017135:0.016799:0.004536:0.012414:0.004469:0.008668:0.008668:0.008332:0.004537:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
工作 。转码完成之后存入点播服务器 ，同时在:@0.119047:0.290689:0.480829:0.290689:0.480829:0.276478:0.119047:0.276478:0.017891:0.016799:0.003620:0.017891:0.017891:0.017891:0.017891:0.017891:0.017891:0.017891:0.017891:0.017891:0.017891:0.017891:0.017891:0.017891:0.016799:0.003620:0.017891:0.017891:0.017891:0.016799
后台管理程序中添加相关视频信息 ，用户通过电:@0.119047:0.309875:0.481059:0.309875:0.481059:0.295665:0.119047:0.295665:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
脑或者手机（企业微信）登陆访问相关视频文件 。:@0.119047:0.329061:0.489435:0.329061:0.489435:0.314851:0.119047:0.314851:0.017118:0.017118:0.017118:0.017118:0.012913:0.017118:0.017118:0.017118:0.017118:0.017118:0.012915:0.017118:0.017118:0.017118:0.017118:0.017118:0.017118:0.017118:0.017118:0.017118:0.016799:0.002836:0.016799
初期视频量相对还比较少 ，手动处理视频转码工:@0.119047:0.348247:0.481059:0.348247:0.481059:0.334037:0.119047:0.334037:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
作尚在可控范围内 ，方便灵活 。:@0.119047:0.367433:0.359272:0.367433:0.359272:0.353223:0.119047:0.353223:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.002520:0.016799:0.016799:0.016799:0.016799:0.016799:0.002520:0.016799
视频库系统架构图具体如下（见图 3）。:@0.153334:0.386619:0.443050:0.386619:0.443050:0.372409:0.153334:0.372409:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.012599:0.016799:0.016799:0.016799:0.004200:0.008332:0.012601:0.016799
商的回调或轮询查询转码的进度 ，从而保证转码:@0.519047:0.175572:0.881057:0.175572:0.881057:0.161361:0.519047:0.161361:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002849:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
任务的事件能实时同步到数据库 ，这些都让平台:@0.519047:0.194758:0.881057:0.194758:0.881057:0.180548:0.519047:0.180548:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002849:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
开发的技术难度大大增加 。:@0.519047:0.213944:0.723154:0.213944:0.723154:0.199734:0.519047:0.199734:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.002520:0.016799
另外 ，当转码的过程中如果考虑不同用户的:@0.553333:0.233130:0.881039:0.233130:0.881039:0.218920:0.553333:0.218920:0.017135:0.016799:0.002847:0.017135:0.017135:0.017135:0.017127:0.017135:0.017135:0.017127:0.017135:0.017135:0.017127:0.017135:0.017135:0.017135:0.017127:0.017135:0.017135:0.016799
使用场景和网络带宽条件 ，只能预先设定好几种:@0.519047:0.252316:0.881059:0.252316:0.881059:0.238106:0.519047:0.238106:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
不同的码率和采样率 。如果编码器或操作系统的:@0.519047:0.271502:0.881059:0.271502:0.881059:0.257292:0.519047:0.257292:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
改变或某些参数的调整 ，就需要将视频重新转码:@0.519047:0.290689:0.881057:0.290689:0.881057:0.276478:0.519047:0.276478:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002849:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
一次 ，耗费大量的时间 。而这些仅仅只能针对大:@0.519047:0.309875:0.880901:0.309875:0.880901:0.295665:0.519047:0.295665:0.017001:0.016799:0.002723:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.016799:0.002725:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.016799
部分用户 ，而无法根据用户的具体情况进行自适:@0.519047:0.329061:0.881057:0.329061:0.881057:0.314851:0.519047:0.314851:0.017135:0.017135:0.017135:0.016799:0.002849:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
应的调整 。:@0.519047:0.348247:0.605561:0.348247:0.605561:0.334037:0.519047:0.334037:0.016799:0.016799:0.016799:0.016799:0.002520:0.016799
当企业有了一定的数据量和资源量的时候 ，:@0.553333:0.367433:0.889250:0.367433:0.889250:0.353223:0.553333:0.353223:0.017588:0.017588:0.017588:0.017588:0.017588:0.017588:0.017588:0.017588:0.017588:0.017588:0.017588:0.017588:0.017588:0.017588:0.017588:0.017588:0.017588:0.016799:0.003314:0.016799
未来的发展方向便是实时转码 。与上面的非同步:@0.519047:0.386619:0.881059:0.386619:0.881059:0.372409:0.519047:0.372409:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
方案不同 ，转码的过程发生在用户播放的时候 ，:@0.519047:0.405805:0.889302:0.405805:0.889302:0.391595:0.519047:0.391595:0.017420:0.017420:0.017420:0.016799:0.003145:0.017420:0.017420:0.017420:0.017420:0.017420:0.017420:0.017420:0.017420:0.017420:0.017420:0.017420:0.017420:0.017420:0.017420:0.017420:0.016799:0.003145:0.016799
用户一边观看视频 ，服务器一边完成转码分发推:@0.519047:0.424992:0.881059:0.424992:0.881059:0.410782:0.519047:0.410782:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
流的工作 。实时转码使用了服务器集群进行分布:@0.519047:0.444178:0.881057:0.444178:0.881057:0.429968:0.519047:0.429968:0.017135:0.017135:0.017135:0.016799:0.002849:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
式编码 ，同时使用直播中常用的流媒体技术进行:@0.519047:0.463364:0.881059:0.463364:0.881059:0.449154:0.519047:0.449154:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
部署 。当用户需要观看视频的时候 ，服务器根据:@0.519047:0.482550:0.880901:0.482550:0.880901:0.468340:0.519047:0.468340:0.017001:0.016799:0.002723:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.016799:0.002725:0.017001:0.017001:0.017001:0.017001:0.017001:0.016799
设定好的参数 ，将视频文件切成小块后组成一个:@0.519047:0.501736:0.881059:0.501736:0.881059:0.487526:0.519047:0.487526:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
播放列表 ，先选择时间点后的几分钟的视频块进:@0.519047:0.520922:0.881057:0.520922:0.881057:0.506712:0.519047:0.506712:0.017135:0.017135:0.017135:0.016799:0.002849:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
行编码 ，队列系统通知转码服务器启动这些编码:@0.519047:0.540109:0.881059:0.540109:0.881059:0.525898:0.519047:0.525898:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
工作 。这个工作可以有一个大型的转码集群来完:@0.519047:0.559295:0.881057:0.559295:0.881057:0.545085:0.519047:0.545085:0.017135:0.016799:0.002849:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
成 ，转码完毕后进行分发部署 ，当用户拉动时间:@0.519047:0.578481:0.880901:0.578481:0.880901:0.564271:0.519047:0.564271:0.016799:0.002725:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.016799:0.002723:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.016799
线（如快进或后退等操作），系统再次按照参数选:@0.519047:0.597667:0.880961:0.597667:0.880961:0.583457:0.519047:0.583457:0.012834:0.017034:0.017034:0.017034:0.017034:0.017034:0.017034:0.017034:0.017034:0.017034:0.017034:0.008633:0.017034:0.017034:0.017034:0.017034:0.017034:0.017034:0.017034:0.017034:0.017034:0.016799
择相应的视频块进行编码操作 。:@0.519047:0.616853:0.756752:0.616853:0.756752:0.602643:0.519047:0.602643:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.002520:0.016799
综上所述 ，实时转码视频库架构图具体如下:@0.553333:0.636039:0.881032:0.636039:0.881032:0.621829:0.553333:0.621829:0.017135:0.017127:0.017135:0.016799:0.002849:0.017135:0.017127:0.017135:0.017135:0.017127:0.017135:0.017135:0.017127:0.017135:0.017135:0.017135:0.017127:0.017135:0.017135:0.016799
（见图 4）。:@0.510647:0.655226:0.602976:0.655226:0.602976:0.641015:0.510647:0.641015:0.016799:0.016799:0.016799:0.004200:0.008332:0.012601:0.016799
由于视频编码转码需要耗费大量 CPU 资源和:@0.153334:0.635420:0.480912:0.635420:0.480912:0.621210:0.153334:0.621210:0.016950:0.016950:0.016950:0.016950:0.016950:0.016950:0.016950:0.016950:0.016950:0.016950:0.016950:0.016950:0.016950:0.016799:0.004353:0.010392:0.009475:0.011154:0.004354:0.016950:0.016950:0.016799
时间 ，因此一般视频编码转码都是非同步的（异:@0.119047:0.654607:0.480901:0.654607:0.480901:0.640397:0.119047:0.640397:0.017336:0.016799:0.003059:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.013140:0.017336:0.016799
步）。用户上传完视频文件后 ，一般会有队列系:@0.119047:0.673793:0.480901:0.673793:0.480901:0.659583:0.119047:0.659583:0.017336:0.013138:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.016799:0.003061:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.017336:0.016799
统将转码任务放入队列 ，然后系统通知转码服务:@0.119047:0.692979:0.481058:0.692979:0.481058:0.678769:0.119047:0.678769:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002849:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
器开始工作 。转码服务器收到任务后 ，根据设定:@0.119047:0.712165:0.480903:0.712165:0.480903:0.697955:0.119047:0.697955:0.017001:0.017001:0.017001:0.017001:0.016799:0.002725:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.016799:0.002725:0.017001:0.017001:0.017001:0.017001:0.016799
好的参数对视频进行编码转码的工作 。视频码率:@0.119047:0.731351:0.481059:0.731351:0.481059:0.717141:0.119047:0.717141:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.016799
越高消耗的时间越长 ，当转码完毕后再次进入分:@0.119047:0.750537:0.481059:0.750537:0.481059:0.736327:0.119047:0.736327:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
发队列 ，由队列系统完成分发至不同的节点 。而:@0.119047:0.769724:0.480903:0.769724:0.480903:0.755513:0.119047:0.755513:0.017001:0.017001:0.016799:0.002725:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.017001:0.016799:0.002725:0.017001:0.016799
用户必须等待视频编码转码分发全部完成后才能:@0.119047:0.788910:0.480896:0.788910:0.480896:0.774700:0.119047:0.774700:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.017253:0.016799
进行播放 ，如果上传的用户多 ，队列长 ，用户:@0.119047:0.808096:0.480992:0.808096:0.480992:0.793886:0.119047:0.793886:0.017765:0.017773:0.017765:0.016799:0.003487:0.017765:0.017773:0.017765:0.017773:0.017765:0.017765:0.017773:0.017765:0.016799:0.003487:0.017765:0.017773:0.017765:0.016799:0.003486:0.017773:0.017765:0.016799
的等待时间也就更长 ，会严重影响用户的使用体:@0.119047:0.827282:0.481059:0.827282:0.481059:0.813072:0.119047:0.813072:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
验 ，这也是大多数视频平台会出现视频播放等待:@0.119047:0.846468:0.481059:0.846468:0.481059:0.832258:0.119047:0.832258:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799
时间长的根本原因 。:@0.119047:0.865654:0.272758:0.865654:0.272758:0.851444:0.119047:0.851444:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.016799:0.002520:0.016799
从开发角度来说 ，开发人员需要根据服务商:@0.153334:0.884841:0.481032:0.884841:0.481032:0.870630:0.153334:0.870630:0.017135:0.017127:0.017135:0.017135:0.017135:0.017127:0.016799:0.002849:0.017135:0.017135:0.017127:0.017135:0.017135:0.017127:0.017135:0.017135:0.017127:0.017135:0.017135:0.016799
提供的软件开发工具包进行部署队列 ，等待服务:@0.119047:0.904027:0.481059:0.904027:0.481059:0.889817:0.119047:0.889817:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.017135:0.016799:0.002851:0.017135:0.017135:0.017135:0.017135:0.016799
图 3    视频库系统架构图:@0.119047:0.597944:0.265709:0.597944:0.265709:0.586615:0.119047:0.586615:0.013439:0.003360:0.007459:0.003723:0.003723:0.003723:0.003723:0.013439:0.013439:0.013439:0.013439:0.013439:0.013439:0.013439:0.013439
①:@0.265723:0.592187:0.273558:0.592187:0.273558:0.585582:0.265723:0.585582:0.007835
图 4    实时转码视频库架构图:@0.519047:0.902242:0.692587:0.902242:0.692587:0.890913:0.519047:0.890913:0.013439:0.003360:0.007459:0.003723:0.003723:0.003723:0.003723:0.013439:0.013439:0.013439:0.013439:0.013439:0.013439:0.013439:0.013439:0.013439:0.013439
①:@0.692601:0.896485:0.700436:0.896485:0.700436:0.889880:0.692601:0.889880:0.007835